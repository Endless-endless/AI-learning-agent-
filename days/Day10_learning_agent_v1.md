
ğŸ‘‰ ä»Šæ—¥æœ€é‡è¦é‡è¦çš„æ¦‚å¿µï¼š
**Agent â‰  Prompt + Loop  
Agent = Program owns the decision.**

# ğŸ“˜ Day 10ï½œAgent æ§åˆ¶æµ Â· çŠ¶æ€ Â· çŸ­æœŸè®°å¿†

> å­¦ä¹ ç›®æ ‡ï¼š  
> ä»ã€Œä¸€æ¬¡æ€§ Promptã€å‡çº§ä¸ºã€Œ**æœ‰æ§åˆ¶æµã€æœ‰çŠ¶æ€çš„ Agent v1**ã€

---

## ä¸€ã€ä»Šæ—¥ç›®æ ‡ï¼ˆWhatï¼‰

> ç”¨ä¸€å¥è¯æè¿°ä»Šå¤©**çœŸæ­£è¦è§£å†³çš„é—®é¢˜**

`æ„å»ºä¸€ä¸ªæœ€å°å¯è¿è¡Œçš„ Agentï¼Œä½¿ç¨‹åºè€Œé LLM æŒæ§å†³ç­–æµç¨‹ï¼Œå¹¶å¼•å…¥æ˜¾å¼çŠ¶æ€ä½œä¸ºçŸ­æœŸè®°å¿†ã€‚`

---

## äºŒã€Agent v1 çš„æ ¸å¿ƒèƒ½åŠ›ï¼ˆOutcomeï¼‰

> ä»Šå¤©ç»“æŸåï¼ŒAgent å…·å¤‡äº†å“ªäº›**ä¸å¯é€†çš„æ–°èƒ½åŠ›**

-  ç¨‹åºå¯ä»¥åˆ¤æ–­ LLM è¾“å‡ºæ˜¯å¦åˆæ ¼
    
-  ç¨‹åºå¯ä»¥å†³å®šæ˜¯å¦ retry
    
-  Agent æœ‰æ˜¾å¼çŠ¶æ€ï¼ˆstateï¼‰
    
-  Agent èƒ½è®°å½•è¿è¡Œè¿‡ç¨‹ï¼ˆhistoryï¼‰
    

ğŸ‘‰ **è¿™æ˜¯ Agentï¼Œè€Œä¸æ˜¯ Prompt + Loop**

---

## ä¸‰ã€Agent æ¶æ„å¿«ç…§ï¼ˆArchitecture Snapshotï¼‰

`User Goal`
   `â†“`
`Agent Controller`
   `â†“`
`call_llm()`
   `â†“`
`Result (JSON)`
   `â†“`
`is_valid()`
   `â”œâ”€ accept â†’ final_result`
   `â””â”€ reject â†’ retry / refine input`

> æ ¸å¿ƒè½¬å˜ï¼š  
> **å†³ç­–æƒä» LLM â†’ ç¨‹åº**

---

## å››ã€å…³é”®ä»£ç ç»“æ„ï¼ˆKey Codeï¼‰

### 1ï¸âƒ£ Agent Stateï¼ˆçŸ­æœŸè®°å¿†ï¼‰

`state = {`
    `"goal": goal,`
    `"attempt": 0,`
    `"history": [],`
    `"final_result": None`
`}`

> è®¤çŸ¥è¦ç‚¹ï¼š
> 
> - è®°å¿†ä¸æ˜¯ Prompt
>     
> - è®°å¿†æ˜¯**ç¨‹åºä¸­çš„æ•°æ®ç»“æ„**
>     

---

### 2ï¸âƒ£ æ§åˆ¶æµæ ¸å¿ƒï¼ˆControl Flowï¼‰

`while state["attempt"] <= MAX_RETRY:`
    `result = call_llm(...)`
    `if is_valid(result):`
        `accept`
    `else:`
        `retry`

> è¿™æ˜¯ Agent çš„â€œå¿ƒè„â€ã€‚

---

### 3ï¸âƒ£ åˆ¤æ–­å‡½æ•°ï¼ˆDecision Ruleï¼‰

`def is_valid(result):`
    `return result.get("confidence", 0) >= THRESHOLD`

> `confidence` æ˜¯ï¼š
> 
> - å†³ç­–ä¿¡å·
>     
> - è€Œä¸æ˜¯â€œæ¨¡å‹æ˜¯å¦çœŸçš„è‡ªä¿¡â€
>     

---

## äº”ã€ä»Šå¤©æœ€é‡è¦çš„è®¤çŸ¥è½¬å˜ï¼ˆKey Insightï¼‰

> ç”¨è‡ªå·±çš„è¯å†™ä¸€å¥ **ä»Šå¤©â€œçªç„¶æƒ³é€šäº†ä»€ä¹ˆâ€**

`Agent çš„æœ¬è´¨ä¸æ˜¯æ¨¡å‹æœ‰å¤šèªæ˜ï¼Œè€Œæ˜¯ç¨‹åºæ˜¯å¦æŒæ¡äº†â€œæ˜¯å¦ç»§ç»­â€çš„æ§åˆ¶æƒã€‚`

---

## å…­ã€ä¸ä¹‹å‰é˜¶æ®µçš„æœ¬è´¨åŒºåˆ«ï¼ˆBefore vs Afterï¼‰

| ä¹‹å‰         | ç°åœ¨            |
| ---------- | ------------- |
| Prompt ä¸€æ¬¡æ€§ | Prompt å¯è¢«ç¨‹åºä¿®æ”¹ |
| LLM å†³å®šè¾“å‡º   | ç¨‹åºå†³å®šæ¥å—ä¸å¦      |
| æ— çŠ¶æ€        | æœ‰æ˜¾å¼ state     |
| ä¸å¯å›æ”¾       | å¯å›æ”¾æ‰§è¡Œå†å²       |

---

## ä¸ƒã€é—®é¢˜ & ä¸ç¡®å®šç‚¹ï¼ˆOpen Questionsï¼‰

> **æ˜ç¡®è®°å½•æ²¡æƒ³é€çš„åœ°æ–¹ï¼Œæ¯”â€œå‡è£…æ‡‚äº†â€é‡è¦**

- `confidence` æ˜¯å¦å¯é ï¼Ÿ
	è¾ƒå¯é ï¼Œä½†æˆ‘ä»¬å¹¶ä¸æ¸…æ¥šå…¶è¯„çº§çš„æ ‡å‡†ï¼Œå¯¹äºä½¿ç”¨è€…çš„è‡ªä¸»å‘æŒ¥æœ‰é™åˆ¶
	
	confidence ä¸æ˜¯å®¢è§‚è´¨é‡è¯„ä¼°ï¼Œè€Œæ˜¯ LLM æä¾›çš„ä¸€ä¸ªå¼±ä¿¡å·ã€‚
	å®ƒåœ¨ Agent v1 ä¸­å¯ç”¨ä½œå¿«é€Ÿå†³ç­–å‚è€ƒï¼Œä½†ä¸åº”ä½œä¸ºå”¯ä¸€åˆ¤æ–­ä¾æ®ã€‚

- retry ç­–ç•¥æ˜¯å¦åº”è¯¥æ›´å¤æ‚ï¼Ÿ
	ç›®å‰æ¥çœ‹è¿™æ ·çš„retryç­–ç•¥å¤Ÿç”¨ï¼Œä½†åˆ°åæœŸä¸åº”è¯¥åªæœ‰confidenceä¸€ä¸ªæ ‡å‡†ï¼Œè€Œåº”è¯¥å°½é‡ä½¿ç”¨å¤šä¸ªæŒ‡æ ‡æ¥è¯„ä¼°
	
    å½“å‰ retry ç­–ç•¥æ˜¯ Agent v1 çš„æœ€å°å¯è¡Œæ–¹æ¡ˆã€‚
	éšç€ Agent æ¼”åŒ–ï¼Œåº”å¼•å…¥å¤šæŒ‡æ ‡å†³ç­–ï¼ˆç»“æ„ã€è§„åˆ™ã€å†å²ï¼‰ï¼Œ
	ä½†ä¸åº”åœ¨ v1 é˜¶æ®µè¿‡æ—©å¤æ‚åŒ–ã€‚
	
- state å’Œ memory çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Ÿ
    state ä¸ memory çš„è¾¹ç•Œä¸åœ¨äºæ¬¡æ•°æˆ–è§„æ¨¡ï¼Œ
	è€Œåœ¨äºæ˜¯å¦è·¨è¿è¡Œå­˜åœ¨ã€‚
	**state æ˜¯ä¸€æ¬¡ Agent æ‰§è¡Œçš„è¿è¡Œæ€ï¼Œ
	memory æ˜¯è·¨å¤šæ¬¡æ‰§è¡Œçš„æŒä¹…åŒ–ç»éªŒã€‚**

---

## å…«ã€ä¸º Day 11 åšå‡†å¤‡ï¼ˆNext Stepï¼‰

> ä¸‹ä¸€æ­¥è¦åšä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™æ˜¯è‡ªç„¶å»¶ä¼¸ï¼Ÿ

`å°† state æŒä¹…åŒ–åˆ°æ–‡ä»¶ / æ•°æ®åº“ï¼Œä½¿ Agent é‡å¯åä»èƒ½è®°ä½å†å²å¤±è´¥ä¸æˆåŠŸã€‚`

---

## ä¹ã€ä»Šæ—¥ä¸€å¥è¯æ€»ç»“ï¼ˆOne-linerï¼‰

> å¦‚æœåªèƒ½ç•™ä¸€å¥è¯ç»™æœªæ¥çš„è‡ªå·±

`Agent = Program owns the decision, LLM is just a generator.`